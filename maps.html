<!doctype html>

<head>
  <meta charset="utf-8">
  <title>bastienchamp.com</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Leaflet (pour OpenStreetMap) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>

  <style>
    html, body { height: 100%; margin: 0; padding: 0; background: #FAFAFA; }

    /* Deux calques carte superpos√©s (√©vite display:none pour Leaflet) */
    .map-layer {
      position: absolute; inset: 0; width: 100%; height: 100vh; z-index: 0;
    }
    #map-google.map-layer { z-index: 1; }
    #map-osm.map-layer    { z-index: 0; }

    .is-hidden  { visibility: hidden; opacity: 0; pointer-events: none; }
    .is-visible { visibility: visible; opacity: 1; pointer-events: auto; }

    /* Barres fixes ‚Äî toujours au-dessus des calques de carte */
    .bottom-bar, .top-bar, .left-bar, .right-bar { position: fixed; background: #FFFFFF; z-index: 9996; }
    .bottom-bar { left: 0; right: 0; bottom: 0; height: 1.8vh; }
    .top-bar    { left: 0; right: 0; top: 0;    height: 1.8vh; }
    .left-bar   { left: 0; top: 0; bottom: 0;   width:  1.8vh; }
    .right-bar  { right: 0; top: 0; bottom: 0;  width:  1.8vh; }

    /* Modale fixe (clic) */
    .custom-modal {
      position: fixed; bottom: 6vh; left: 6vh; background: white; padding: 18px 24px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      font-size: 15px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      z-index: 9999; max-width: 260px; line-height: 1.35; text-align: left;
      opacity: 0; visibility: hidden; pointer-events: none; transform: translateY(6px);
      transition: opacity .18s ease, transform .18s ease, visibility 0s linear .18s, border-color .18s ease;
      border: 2px solid transparent;
    }
    .custom-modal.is-visible { opacity: 1; visibility: visible; pointer-events: auto; transform: translateY(0); transition: opacity .18s, transform .18s, visibility 0s; }
    .custom-modal .modal-header { display: flex; align-items: center; justify-content: space-between; gap: 12px; margin-bottom: 6px; }
    .custom-modal .title { font-weight: 600; margin-bottom: 6px; }
    .custom-modal .year { font-size: 14px; }
    .custom-modal .bike { font-size: 14px; margin-top: 4px; margin-bottom: 6px; }
    .custom-modal .link { font-size: 13px; color: #0066cc; word-break: break-all; }
    .custom-modal .close-x { width: 24px; height: 24px; line-height: 24px; text-align: center; border: none; background: transparent; cursor: pointer; font-size: 18px; color: #666; padding: 0; }
    .custom-modal .close-x:hover { color: #111; }

    /* Tooltip (hover) */
    .hover-modal {
      display: none; position: fixed; background: white; padding: 10px 12px;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      font-size: 13.5px; border-radius: 6px; box-shadow: 0 4px 12px rgba(0,0,0,0.25);
      z-index: 10000; max-width: 260px; line-height: 1.35; text-align: left; pointer-events: none;
    }
    .hover-modal .title { font-weight: 600; margin-top: 2px; }
    .hover-modal .year  { opacity: 0.9; }

    /* ===========================
       Styles des boutons custom
       =========================== */
    .map-controls {
      position: fixed;
      right: calc(1.8vh + 12px);       /* aligne avec .right-bar */
      bottom: calc(1.8vh + 12px);      /* aligne avec .bottom-bar */
      z-index: 9998;
      display: flex; flex-direction: row; align-items: flex-end; gap: 10px;
      background: transparent; padding: 0; white-space: nowrap;
    }
    .map-controls .group {
      display: flex; align-items: center; gap: 8px;
      background: rgba(255,255,255,0.92);
      border: 1px solid #E5E5E5; border-radius: 12px; padding: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.12); backdrop-filter: blur(6px);
      flex: 0 0 auto; width: auto;
    }
    .group-zoom { width: auto; }

    .map-btn {
      appearance: none; border: 1px solid #E5E5E5; background: #fff; border-radius: 10px;
      width: 38px; height: 38px; display: inline-flex; align-items: center; justify-content: center;
      font: 600 16px/1 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      transition: box-shadow .15s ease, transform .08s ease, border-color .15s ease, background .15s ease;
      user-select: none;
    }
    .map-btn:hover { box-shadow: 0 4px 10px rgba(0,0,0,0.14); }
    .map-btn:active { transform: translateY(1px); }
    .map-btn.is-on { border-color: #3D55EB; box-shadow: 0 0 0 3px rgba(61,85,235,0.15); }
    .map-btn.is-disabled, .map-btn:disabled { opacity: .5; cursor: not-allowed; }

    /* Bouton texte (s√©lecteur provider) */
    .map-btn.label {
      width: auto; height: 38px; padding: 0 12px;
      font-size: 13px; font-weight: 600; letter-spacing: .2px;
    }

    .map-btn svg { width: 18px; height: 18px; display: block; }

    .map-select {
      border: 1px solid #E5E5E5; background: #fff; border-radius: 10px; height: 38px;
      padding: 0 12px; padding-right: 26px;   /* espace pour le chevron */
      font: 14px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.08);
      transition: box-shadow .15s ease, border-color .15s ease;
    }
    .map-select:hover  { box-shadow: 0 4px 10px rgba(0,0,0,0.14); }
    .map-select:disabled { opacity: .6; cursor: not-allowed; }
  </style>
</head>

<body>
  <!-- Deux conteneurs carte superpos√©s -->
  <div id="map-google" class="map-layer is-visible"></div>
  <div id="map-osm"    class="map-layer is-hidden"></div>

  <div class="bottom-bar"></div>
  <div class="top-bar"></div>
  <div class="left-bar"></div>
  <div class="right-bar"></div>

  <!-- Modale fixe (clic) -->
  <div id="trackModal" class="custom-modal"></div>
  <!-- Tooltip (hover) -->
  <div id="hoverModal" class="hover-modal"></div>

  <!-- Overlay fixe pour les contr√¥les -->
  <div id="customControls" class="map-controls" aria-label="Contr√¥les de la carte"></div>

  <script>
    // === Centre & zoom par d√©faut (identiques pour Google & OSM) ===
    const DEFAULT_CENTER = { lat: 46.774311, lng: 9.204760 };
    const DEFAULT_ZOOM   = 6.90; // d√©cimal ‚Äî Leaflet acceptera les d√©cimales gr√¢ce √† zoomSnap:0

    let gmap = null;          // Google Maps instance
    let osmMap = null;        // Leaflet instance
    let currentProvider = 'google';

    // Stockage des routes (pour dessiner aussi sur OSM)
    const routesData = []; // { coords:[{lat,lng}], color:'#hex', meta:{...} }

    function initMap() {
      // Google Maps (principal)
      gmap = new google.maps.Map(document.getElementById("map-google"), {
        zoom: DEFAULT_ZOOM,
        center: DEFAULT_CENTER,
        disableDefaultUI: true,
        zoomControl: false,
        streetViewControl: false,
        keyboardShortcuts: false,
        gestureHandling: "greedy",
        minZoom: 4,
        mapTypeId: google.maps.MapTypeId.TERRAIN,
        mapTypeControl: false,
        styles: [
          { featureType: "road", elementType: "labels", stylers: [{ visibility: "off" }] },
          { featureType: "road", elementType: "labels.icon", stylers: [{ visibility: "off" }] },
          { featureType: "road.highway", elementType: "labels", stylers: [{ visibility: "off" }] },
          { featureType: "road.highway", elementType: "labels.icon", stylers: [{ visibility: "off" }] }
        ]
      });

      setupCustomControls();   // barre de contr√¥les
      loadAndDrawGpxRoutes();  // trace les GPX sur Google et m√©morise pour OSM
    }

    /* ===========================
       Contr√¥les custom
    ============================ */
    function setupCustomControls() {
      const controlsRoot = document.getElementById("customControls");

      // Groupe Zoom (√† gauche)
      const grpZoom = document.createElement("div");
      grpZoom.className = "group group-zoom";

      const btnPlus = document.createElement("button");
      btnPlus.className = "map-btn";
      btnPlus.title = "Zoomer";
      btnPlus.setAttribute("aria-label", "Zoom in");
      btnPlus.textContent = "+";
      btnPlus.onclick = () => setZoom(getZoom() + 1);

      const btnMinus = document.createElement("button");
      btnMinus.className = "map-btn";
      btnMinus.title = "D√©zoomer";
      btnMinus.setAttribute("aria-label", "Zoom out");
      btnMinus.textContent = "‚Äì";
      btnMinus.onclick = () => setZoom(getZoom() - 1);

      grpZoom.appendChild(btnPlus);
      grpZoom.appendChild(btnMinus);

      // Groupe Outils (√† droite)
      const grpTools = document.createElement("div");
      grpTools.className = "group group-tools";

      // Street View (Google uniquement)
      const btnSv = document.createElement("button");
      btnSv.className = "map-btn";
      btnSv.title = "Activer/D√©sactiver Street View";
      btnSv.setAttribute("aria-pressed", "false");
      btnSv.innerHTML = `
        <svg viewBox="0 0 24 24" aria-hidden="true">
          <circle cx="12" cy="6" r="3" fill="#F4B400"/>
          <rect x="10.2" y="9" width="3.6" height="6.5" rx="1.2" fill="#F4B400"/>
          <rect x="6.8" y="9.5" width="3" height="2" rx="1" transform="rotate(20 8.3 10.5)" fill="#F4B400"/>
          <rect x="14.2" y="9.5" width="3" height="2" rx="1" transform="rotate(-20 15.7 10.5)" fill="#F4B400"/>
          <rect x="10.4" y="15.8" width="1.4" height="4.2" rx="0.7" fill="#F4B400"/>
          <rect x="12.2" y="15.8" width="1.4" height="4.2" rx="0.7" fill="#F4B400"/>
        </svg>
      `;
      btnSv.onclick = () => {
        if (currentProvider !== 'google') return; // SV indispo en OSM
        const sv = gmap.getStreetView();
        const next = !sv.getVisible();
        if (next) {
          sv.setPosition(gmap.getCenter());
          sv.setPov({ heading: 0, pitch: 0 });
        }
        sv.setVisible(next);
        btnSv.classList.toggle("is-on", next);
        btnSv.setAttribute("aria-pressed", String(next));
      };

      // === Bouton texte Provider (entre SV et Calques) ===
      const btnProvider = document.createElement("button");
      btnProvider.className = "map-btn label";
      btnProvider.title = "Basculer fournisseur de carte (OSM / Google)";
      btnProvider.textContent = "Google Maps"; // Google actif par d√©faut

      // S√©lecteur de calque (Google uniquement)
      const selectType = document.createElement("select");
      selectType.className = "map-select";
      [
        ["roadmap", "Plan"],
        ["satellite", "Satellite"],
        ["hybrid", "Hybride"],
        ["terrain", "Relief"]
      ].forEach(([value, label]) => {
        const opt = document.createElement("option");
        opt.value = value; opt.textContent = label;
        if (value === "terrain") opt.selected = true;
        selectType.appendChild(opt);
      });
      selectType.onchange = (e) => {
        if (currentProvider === 'google') gmap.setMapTypeId(e.target.value);
      };

      // Assemblage
      grpTools.appendChild(btnSv);
      grpTools.appendChild(btnProvider);
      grpTools.appendChild(selectType);

      controlsRoot.appendChild(grpZoom);
      controlsRoot.appendChild(grpTools);

      // Toggle provider
      btnProvider.onclick = () => {
        if (currentProvider === 'google') {
          useOpenStreetMap().then(() => {
            btnProvider.textContent = "OpenStreetMap";
            selectType.disabled = true;
            btnSv.classList.add("is-disabled");
            const sv = gmap.getStreetView(); sv.setVisible(false);
            btnSv.classList.remove("is-on");
            btnSv.setAttribute("aria-pressed", "false");
          });
        } else {
          useGoogleMaps();
          btnProvider.textContent = "Google Maps";
          selectType.disabled = false;
          btnSv.classList.remove("is-disabled");
        }
      };
    }

    function getZoom() {
      return currentProvider === 'google' ? gmap.getZoom() : (osmMap ? osmMap.getZoom() : DEFAULT_ZOOM);
    }
    function setZoom(z) {
      if (currentProvider === 'google') gmap.setZoom(z);
      else if (osmMap) osmMap.setZoom(z);
    }

    /* ===========================
       Basculer OSM / Google
    ============================ */
    async function useOpenStreetMap() {
      const mapGoogleEl = document.getElementById('map-google');
      const mapOsmEl    = document.getElementById('map-osm');

      // Cr√©e la map OSM si besoin (avec zoomSnap:0 pour respecter les d√©cimales)
      if (!osmMap) {
        osmMap = L.map('map-osm', {
          zoomControl: false,
          attributionControl: true,
          zoomSnap: 0,        // ‚úÖ autorise les zooms d√©cimaux
          zoomDelta: 0.25
        });
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 19,
          attribution: '&copy; OpenStreetMap contributors'
        }).addTo(osmMap);
        // Tracer les routes d√©j√† connues
        drawRoutesOnOSM();
      }

      // Synchronise vue (m√™me zoom exact que Google)
      const c = gmap.getCenter().toJSON();
      const z = gmap.getZoom() ?? DEFAULT_ZOOM;
      osmMap.setView([c.lat, c.lng], z);

      // Affiche OSM, cache Google (sans display:none)
      mapGoogleEl.classList.remove('is-visible'); mapGoogleEl.classList.add('is-hidden');
      mapOsmEl.classList.remove('is-hidden');     mapOsmEl.classList.add('is-visible');

      // Laisse le DOM se peindre, puis invalide la taille de Leaflet
      await new Promise(requestAnimationFrame);
      osmMap.invalidateSize(true);

      currentProvider = 'osm';
    }

    function useGoogleMaps() {
      const mapGoogleEl = document.getElementById('map-google');
      const mapOsmEl    = document.getElementById('map-osm');

      if (osmMap) {
        const c = osmMap.getCenter();
        const z = osmMap.getZoom();
        gmap.setCenter({ lat: c.lat, lng: c.lng });
        gmap.setZoom(z);
      } else {
        // Au cas o√π OSM n'a jamais √©t√© cr√©√©, on reste sur les valeurs par d√©faut
        gmap.setCenter(DEFAULT_CENTER);
        gmap.setZoom(DEFAULT_ZOOM);
      }

      // Affiche Google, cache OSM
      mapOsmEl.classList.remove('is-visible');  mapOsmEl.classList.add('is-hidden');
      mapGoogleEl.classList.remove('is-hidden'); mapGoogleEl.classList.add('is-visible');

      currentProvider = 'google';
    }

    /* ===========================
       Chargement & trac√© GPX (Google + m√©moire pour OSM)
    ============================ */
    function loadAndDrawGpxRoutes() {
      const gpxFiles = [
        'resources/gpx/17D1.gpx','resources/gpx/17D2.gpx','resources/gpx/17D3.gpx','resources/gpx/17D4.gpx','resources/gpx/17D5.gpx','resources/gpx/17D6.gpx','resources/gpx/17D7.gpx',
        'resources/gpx/20D1.gpx','resources/gpx/20D2.gpx','resources/gpx/20D3.gpx','resources/gpx/20D4.gpx',
        'resources/gpx/21D1.gpx','resources/gpx/21D2.gpx','resources/gpx/21D3.gpx','resources/gpx/21D4.gpx','resources/gpx/21D5.gpx','resources/gpx/21D6.gpx','resources/gpx/21D7.gpx','resources/gpx/21D8.gpx',
        'resources/gpx/23D1.gpx','resources/gpx/23D2.gpx','resources/gpx/23D3.gpx',
        'resources/gpx/24D1.gpx','resources/gpx/24D2.gpx',
        'resources/gpx/25D1.gpx','resources/gpx/25D2.gpx'
      ];

      const colorByPrefix = {
        '17': '#EB3D4D', '20': '#3D55EB', '21': '#EBA73D', '23': '#82BEEF', '24': '#968759', '25': '#6B5154',
      };

      const modal = document.getElementById('trackModal');
      const hoverModal = document.getElementById('hoverModal');

      let lockedPolyline = null, lockedShadow = null;
      let hoverTimer = null;
      const HOVER_DELAY = 80;

      const baseMain = { weight: 3,  opacity: 1.0 };
      const hoverMain= { weight: 4.5, opacity: 1.0 };
      const baseShad = { weight: 5,  opacity: 0.35 };
      const hoverShad= { weight: 7,  opacity: 0.6 };

      const esc = (s)=>String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');

      function showFixedModal(data, borderColor) {
        modal.innerHTML = `
          <div class="modal-header">
            ${data.year ? `<div class="year">${esc(data.year)}</div>` : `<div class="year"></div>`}
            <button class="close-x" type="button" aria-label="Fermer">√ó</button>
          </div>
          <div class="title">${esc(data.trackName)}</div>
          ${data.bike ? `<div class="bike">üèçÔ∏è ${esc(data.bike)}</div>` : ''}
          ${data.linkHref ? `<div class="link"><a href="${esc(data.linkHref)}" target="_blank">Voir l‚Äôitin√©raire</a></div>` : ''}
        `;
        modal.style.borderColor = borderColor || '#cccccc';
        modal.classList.add('is-visible');
        modal.querySelector('.close-x').onclick = (ev) => { ev.stopPropagation(); closeFixedModal(); };
      }
      function closeFixedModal() {
        modal.classList.remove('is-visible');
        if (lockedPolyline && lockedShadow) {
          lockedPolyline.setOptions({ strokeOpacity: baseMain.opacity, strokeWeight: baseMain.weight });
          lockedShadow.setOptions({ strokeOpacity: baseShad.opacity, strokeWeight: baseShad.weight });
        }
        lockedPolyline = null; lockedShadow = null;
      }
      function showHoverModalAt(data, x, y) {
        hoverModal.innerHTML = `
          ${data.year ? `<div class="year">${esc(data.year)}</div>` : ''}
          <div class="title">${esc(data.trackName)}</div>
        `;
        const offset = 12;
        hoverModal.style.left = (x + offset) + 'px';
        hoverModal.style.top  = (y + offset) + 'px';
        hoverModal.style.display = 'block';
      }
      function debouncedHover(data, x, y) {
        clearTimeout(hoverTimer);
        hoverTimer = setTimeout(() => showHoverModalAt(data, x, y), HOVER_DELAY);
      }
      function hideHoverModal() { clearTimeout(hoverTimer); hoverModal.style.display = 'none'; }

      // Charge & trace pour Google, tout en stockant pour OSM
      gpxFiles.forEach(file => {
        fetch(file).then(r => { if (!r.ok) throw new Error(`HTTP ${r.status}`); return r.text(); })
        .then(gpxText => {
          const parser = new DOMParser();
          const xmlDoc = parser.parseFromString(gpxText, "application/xml");

          const trk = xmlDoc.getElementsByTagName('trk')[0];
          const nameNode = trk ? trk.getElementsByTagName('name')[0] : null;
          const yearNode = trk ? trk.getElementsByTagName('year')[0] : null;
          const bikeNode = trk ? trk.getElementsByTagName('bike')[0] : null;
          const linkNode = trk ? trk.getElementsByTagName('link')[0] : null;

          const trackName = nameNode ? nameNode.textContent.trim() : 'Trajet';
          const year = yearNode ? yearNode.textContent.trim() : '';
          const bike = bikeNode ? bikeNode.textContent.trim() : '';
          const linkHref = linkNode ? linkNode.getAttribute('href') : '';

          const trkpts = xmlDoc.getElementsByTagName('trkpt');
          const coords = [];
          for (let i = 0; i < trkpts.length; i++) {
            const lat = parseFloat(trkpts[i].getAttribute('lat'));
            const lon = parseFloat(trkpts[i].getAttribute('lon'));
            coords.push({ lat, lng: lon });
          }

          const match = file.match(/\/(\d{2})[^/]*\.gpx$/i);
          const prefix = match ? match[1] : null;
          const strokeColor = (prefix && colorByPrefix[prefix]) ? colorByPrefix[prefix] : undefined;

          const meta = { year, trackName, bike, linkHref };
          routesData.push({ coords, color: strokeColor, meta });

          // Google: ombre + ligne
          const shadowPolyline = new google.maps.Polyline({
            path: coords, geodesic: true,
            strokeColor: "#000000", strokeOpacity: baseShad.opacity, strokeWeight: baseShad.weight, zIndex: 1
          });
          shadowPolyline.setMap(gmap);

          const polyline = new google.maps.Polyline({
            path: coords, geodesic: true,
            ...(strokeColor ? { strokeColor } : {}),
            strokeOpacity: baseMain.opacity, strokeWeight: baseMain.weight, zIndex: 2
          });
          polyline.setMap(gmap);

          // Interactions Google
          polyline.addListener('mouseover', (e) => {
            if (lockedPolyline && lockedPolyline !== polyline) {
              lockedPolyline.setOptions({ strokeOpacity: baseMain.opacity, strokeWeight: baseMain.weight });
              lockedShadow.setOptions({ strokeOpacity: baseShad.opacity, strokeWeight: baseShad.weight });
              lockedPolyline = null; lockedShadow = null;
            }
            const x = e.domEvent ? e.domEvent.clientX : window.innerWidth/2;
            const y = e.domEvent ? e.domEvent.clientY : window.innerHeight/2;
            debouncedHover(meta, x, y);
            polyline.setOptions({ strokeWeight: hoverMain.weight, strokeOpacity: hoverMain.opacity });
            shadowPolyline.setOptions({ strokeWeight: hoverShad.weight, strokeOpacity: hoverShad.opacity });
          });
          polyline.addListener('mousemove', (e) => {
            const x = e.domEvent ? e.domEvent.clientX : window.innerWidth/2;
            const y = e.domEvent ? e.domEvent.clientY : window.innerHeight/2;
            debouncedHover(meta, x, y);
          });
          polyline.addListener('mouseout', () => {
            hideHoverModal();
            if (lockedPolyline !== polyline) {
              polyline.setOptions({ strokeWeight: baseMain.weight, strokeOpacity: baseMain.opacity });
              shadowPolyline.setOptions({ strokeWeight: baseShad.weight, strokeOpacity: baseShad.opacity });
            }
          });
          polyline.addListener('click', () => {
            if (lockedPolyline && lockedPolyline !== polyline) {
              lockedPolyline.setOptions({ strokeWeight: baseMain.weight, strokeOpacity: baseMain.opacity });
              lockedShadow.setOptions({ strokeWeight: baseShad.weight, strokeOpacity: baseShad.opacity });
            }
            lockedPolyline = polyline; lockedShadow = shadowPolyline;
            showFixedModal(meta, strokeColor || '#cccccc');
            polyline.setOptions({ strokeWeight: hoverMain.weight, strokeOpacity: hoverMain.opacity });
            shadowPolyline.setOptions({ strokeWeight: hoverShad.weight, strokeOpacity: hoverShad.opacity });
          });
        })
        .catch(err => console.error(`Erreur GPX (${file}):`, err));
      });
    }

    /* ===========================
       Dessin des routes sur OSM (Leaflet)
    ============================ */
    function drawRoutesOnOSM() {
      if (!osmMap) return;
      routesData.forEach(route => {
        // Ombre
        L.polyline(route.coords.map(p => [p.lat, p.lng]), {
          color: '#000000', weight: 5, opacity: 0.35
        }).addTo(osmMap);
        // Ligne
        L.polyline(route.coords.map(p => [p.lat, p.lng]), {
          color: route.color || '#3388ff', weight: 3, opacity: 1.0
        }).addTo(osmMap);
      });
    }
  </script>

  <!-- Google Maps JS API -->
  <script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD-pBG0rqLOKQWGkhIjjHHoDIWbwimusJE&callback=initMap"></script>
</body>
</html>